{% extends "layout.html" %}
{% block head %}
{{ super() }}
<link rel="stylesheet" href="{{ url_for('static', filename='css/profile.css') }}">
{% endblock head %}
{% block main %}
<input id="input_profile_img" type="file" accept="images">
<input id="input_background_img" type="file" accept="images">
<section id="profile_container">
    <!-- Det visas error nedan, bry dig inte om det. Allting fungerar som det skall -->
    <section id="profile_header" style="{{ 'background-image: url(' +  url_for('image.uploaded_images', image_id=user_info[5]) if user_info[5] }}"></section>
    <section id="icon_row">
        {% if session["username"] == user_info[0] %}
        <div id="change_background_img_btn" class="button_container">
            <i class="material-icons-outlined button_icon_container">add_photo_alternate</i>
            <div class="button_text_container">
                <span>Change Background</span>
            </div>
        </div>
        <a href="{{ url_for('user.settings') }}" class="button_container">
            <i class="material-icons-outlined button_icon_container">settings</i>
            <div class="button_text_container">
                <span>Settings</span>   
            </div>
        </a>
        {% elif "username" in session %}
        <div class="button_container follow">
            <i id="follow_icon" class="material-icons-outlined button_icon_container">{{ "favorite" if is_following else "favorite_border" }}</i>
            <div class="button_text_container">
                <span>{{ "Unfollow" if is_following else "Follow" }}</span>
            </div>
        </div>
        {% endif %}
    </section>
    <section id="profile_main">
        <section id="stats_container">
            <a id="following_button">
                <h3>{{ followings|length }}</h3>
                <span>Following</span>
            </a>
            <a>
                <section id="profile_img">
                    <img src="{{ url_for('image.uploaded_images', image_id=user_info[4]) if user_info[4] else url_for('static', filename='img/avatar.png') }}">
                    {% if session["username"] == user_info[0] %}
                    <div id="change_profile_img_btn" class="button_container">
                        <i class="material-icons-outlined button_icon_container">add_a_photo</i>
                        <div class="button_text_container">
                            <span>Change profilepicture</span>
                        </div>
                    </div>
                    {% endif %}
                </section>
            </a>
            <a id="followers_button">
                <h3>{{ followers|length }}</h3>
                <span>Followers</span>
            </a>
        </section>
        <section id="profile_info">
            <h2>{{user_info[1]}} {{user_info[2]}}</h2>
            <p>{{user_info[3] if user_info[3] != None}}</p>
        </section>
        
        <!-- HÃ¤r ska album finnas -->
        <section class="albums_container">
                <h2>Album: {{album_count[0]}}</h2>
            </section>
    </section>
</section>
<div id="following">
    <i class="material-icons-outlined cancel_modal">close</i>
    <h2>Following:</h2>
    <div class="follow_list">
        {% for following in followings %}
        <a href="{{url_for('user.profile', username=following[0])}}" class="follow_list_item">
            <div>
                <img src="{{ url_for('image.uploaded_images', image_id=following[1]) if following[1] else url_for('static', filename='img/avatar.png') }}">
                <span>{{following[0]}}</span>
            </div>
            <i class="material-icons-outlined">favorite</i>
        </a>
        {% endfor %}
    </div>
</div>
<div id="followers">
    <i class="material-icons-outlined cancel_modal">close</i>
    <h2>Followers:</h2>
    <div class="follow_list">
        {% for follower in followers %}
        <a href="{{ url_for('user.profile', username=follower[0])}}" class="follow_list_item">
            <div>
                <img src="{{ url_for('image.uploaded_images', image_id=follower[1])  if follower[1] else url_for('static', filename='img/avatar.png') }}" alt="Follower">
                <span>{{follower[0]}}</span>
            </div>
        </a>
        {% endfor %}
    </div>
</div>

<!-- Tidslinje -->
{% include 'timeline.html' %}
{% endblock main %}
{% block javascript %}
{{ super() }}
<script src="{{ url_for('static', filename='js/profile.js') }}"></script>
{% endblock javascript %}